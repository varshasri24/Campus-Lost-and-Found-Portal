<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Lost & Found</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="title-box">
            <h1> Campus Lost & Found</h1>
        </div>
        <div class="nav-box">
            <a href="post.html" class="nav-link">Post Lost/Found</a> |
            <a href="item.html" class="nav-link">View All</a>
            <div class="auth-box">
                <button onclick="showLogin()">Login</button>
                <button onclick="showRegister()">Register</button>
            </div>
        </div>
    </header>

    <!-- Login & Register popups -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Admin / User Login</h2>
            <input type="text" id="loginUser" placeholder="Username"><br>
            <input type="password" id="loginPass" placeholder="Password"><br>
            <button onclick="login()">Login</button>
        </div>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2>Register</h2>
            <input type="text" id="regUser" placeholder="Username"><br>
            <input type="password" id="regPass" placeholder="Password"><br>
            <button onclick="register()">Register</button>
        </div>
    </div>

    <main>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search items...">
            <button>Search</button>
        </div>

        <div class="item-card">
            <img src="C:\Users\jayan\OneDrive\Desktop\bottle.jpg">
			<h2>Lost item</h2>
            <h3>Bottle (LOST)</h3>
            <p>Green colour, tupperware</p>
            <p><strong>Location:</strong> Class room 2080</p>
            <p><strong>Posted:</strong> viru (7010896789)</p>
            <a href="#" class="view-link">View / Message</a>
        </h2>
    </main>
	<script>
	    async function loadItems() {
	      const q = document.getElementById('search').value;
	      const url = q ? `/api/items/search?q=${encodeURIComponent(q)}` : '/api/items';
	      const res = await fetch(url);
	      const items = await res.json();
	      const list = document.getElementById('list');
	      list.innerHTML = '';
	      items.reverse();
	      items.forEach(it => {
	        const div = document.createElement('div');
	        div.className = 'card';
	        div.innerHTML = `
	          <h3>${it.title} <small>(${it.type})</small></h3>
	          <p>${it.description ? it.description.substring(0,200) : ''}</p>
	          <p><b>Location:</b> ${it.location || '-'}</p>
	          <p><b>Posted:</b> ${it.posterName || 'Anonymous'} (${it.posterContact || 'N/A'})</p>
	          ${it.imagePath ? `<img src="/${it.imagePath}" class="thumb"/>` : ''}
	          <p><a href="/item.html?id=${it.id}">View / Message</a></p>
	        `;
	        list.appendChild(div);
	      });
	    }
	    loadItems();
	  </script>

    <script src="script.js"></script>
	<footer class="footer">
	  <p>
	    Â© 2025 Campus Lost & Found Portal | 
	    Contact: <a href="mailto:info@college.edu">info@college.edu</a> |
	    Phone: +91-9876543210 |
	    Address: 123, College Road, City, State, Country
	  </p>
	</footer>

</body>
</html>
